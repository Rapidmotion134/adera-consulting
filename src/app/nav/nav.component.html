<div class="overlay has-fade" [@detailExpand]="isNavOpen ? 'opened' : 'closed'"></div>
<div class="navigation">
  <div class="logo-section">
    <img class="logo" ngSrc="/assets/logo.png" alt="profile picture" width="40" height="20">
  </div>
  <div class="flex-container">
    <p class="title">{{ page === 'FAQ' ? page : page | titlecase }}</p>
    <div class="child">
      <button class="notification" aria-label="notification" [matMenuTriggerFor]="notification">
        <span class="icon-container" [matBadge]="notifications.length">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"  class="bi bi-bell" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"/>
          </svg>
        </span>
      </button>
      <mat-menu class="notification-container" #notification="matMenu">
        @for (notification of notifications; track $index) {
          <ng-container>
            <div class="notification-item" (click)="viewNotification(notification,  $index)">
              <p class="title" >{{ notification.title }}</p>
              <p class="desc" >{{ notification.description }}</p>
            </div>
          </ng-container>
        }
      </mat-menu>
      <button class="menu" [matMenuTriggerFor]="menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
          <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
        </svg>
        <div class="user-text">
          <p class="username">{{username}}</p>
          <p class="detail">{{ isAdmin ? "Administrator" : "User"}}</p>
        </div>
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  class="bi bi-chevron-down" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/>
          </svg>
        </span>
      </button>
      <mat-menu #menu="matMenu">
        @if (isAdmin && adminType === 'main') {
          <button mat-menu-item [routerLink]="['/', 'users', 'create']">Create Account</button>
        }
        <button mat-menu-item (click)="logOut()">Sign Out</button>
      </mat-menu>
      <a id="hamburgerBtn" class="hamburger" (click)="toggleNavbar()">
        <span></span>
        <span></span>
        <span></span>
      </a>
    </div>
  </div>
  <div class="header__menu has-fade" [@detailExpand]="isNavOpen ? 'opened' : 'closed'">
    @if (isAdmin) {
      <ng-container>
        <p class="nav" [routerLink]="['dashboard']" (click)="toggleNavbar()">Dashboard</p>
        @if (adminType !== 'staff') {
          <p class="nav" [routerLink]="['users']" (click)="toggleNavbar()">Users</p>
        }
        @if (adminType !== 'supervisor' && adminType !== 'staff') {
          <p class="nav" [routerLink]="['payment']" (click)="toggleNavbar()">Payments</p>
        }
        <mat-divider></mat-divider>
        @if (adminType !== 'staff') {
          <p class="nav" [routerLink]="['documents']" (click)="toggleNavbar()">Documents</p>
        }
				<p class="nav" [routerLink]="['document', 'select']" (click)="toggleNavbar()">Send Document</p>
        @if (adminType !== 'staff') {
          <p class="nav" [routerLink]="['requests']" (click)="toggleNavbar()">Requests</p>
        }
        <p class="nav" [routerLink]="['notifications']" (click)="toggleNavbar()">Notifications</p>
        @if (adminType === 'main') {
          <p class="nav additional" [routerLink]="['/', 'users', 'create']" (click)="toggleNavbar()">Create Account</p>
        }
        <p class="nav additional" (click)="logOut()">Sign Out</p>
      </ng-container>
    } @else {
      <ng-container>
        <p class="nav" [routerLink]="['dashboard']" (click)="toggleNavbar()">Dashboard</p>
        <p class="nav" [routerLink]="['payment']" (click)="toggleNavbar()">Payments</p>
        <p class="nav" [routerLink]="['documents']" (click)="toggleNavbar()">Documents</p>
				<p class="nav" [routerLink]="['document', 'request' ]" (click)="toggleNavbar()">Send Document</p>
				<p class="nav" [routerLink]="['requests']" (click)="toggleNavbar()">Requests</p>
        <p class="nav" [routerLink]="['notifications']" (click)="toggleNavbar()">Notifications</p>
        <p class="nav additional" (click)="logOut()">Sign Out</p>
      </ng-container>
    }
  </div>
</div>
